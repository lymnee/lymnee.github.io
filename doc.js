/*
    *
        Thesaurus of links.
    *
*/

const links = new Map();

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/:not`,

    titles: {

        'fr': `lire la documentation à propos de la pseudo-classe :not`,

        'en': `read the documentation about pseudo-class :not`

    },

    lang: `en`

}

links.set(`:not`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/@supports`,

    titles: {

        'fr': `lire la documentation à propos de @supports`,

        'en': `read the documentation about @supports`

    },

    lang: `en`

}

links.set(`@supports`, link);

var link = {

    href: `https://css-tricks.com/a-complete-guide-to-data-attributes/`,

    titles: {

        'fr': `lire l’article A Complete Guide to Data Attributes`,

        'en': `read the article A Complete Guide to Data Attributes`

    },

    lang: `en`

}

links.set(`a complete guide to data attributes`, link);

var link = {

    href: `https://acss.io/`,

    titles: {

        'fr': `aller sur le site Atomic CSS`,

        'en': `go to Atomic CSS`

    },

    lang: `en`

}

links.set(`atomic css`, link);

var link = {

    href: `https://bradfrost.com/blog/post/atomic-web-design/`,

    titles: {

        'fr': `lire l’article Atomic Design`,

        'en': `read the article Atomic Design`

    },

    lang: `en`

}

links.set(`atomic design`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes`,

    title: `lire l’article Using data attributes`,

    lang: `en`

}

links.set(`attributs de données`, link);

var link = {

    href: `https://amcss.github.io/`,

    titles: {

        'fr': `read the article Attributes Modules for CSS`,

        'en': `read the article Attributes Modules for CSS`

    },

    lang: `en`

}

links.set(`attributes modules for css`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/calc`,

    titles: {

        'fr': `lire l’article calc()`,

        'en': `read the article calc()`

    },

    lang: `en`

}

links.set(`calc()`, link);

var link = {

    href: `http://getbem.com/`,

    titles: {

        'fr': `aller sur le site BEM — Block Element Modifier`,

        'en': `go to BEM — Block Element Modifier`

    },

    lang: `en`

}

links.set(`bem — block element modifier`, link);

var link = {

    href: `https://browserdefaultstyles.com/`,

    titles: {

        'fr': `aller sur le site Browser Default Styles`,

        'en': `go to Browser Default Styles`

    },

    lang: `en`

}

links.set(`browser default styles`, link);

var link = {

    href: `https://www.w3schools.com/cssref/css_default_values.asp`,

    titles: {

        'fr': `aller sur la page CSS Default Values Reference`,

        'en': `go to page CSS Default Values Reference`

    },

    lang: `en`

}

links.set(`css default values reference`, link);

var link = {

    href: `https://www.w3.org/Style/CSS/specs.en.html`,

    title: `read Css specifications`,

    lang: `en`

}

links.set(`css specifications`, link);

var link = {

    href: `https://cssstats.com/stats/?url=facebook.com`,

    titles: {

        'fr': `consulter l’outil CSS Stats`,

        'en': `view the tool CSS Stats`

    },

    lang: `en`

}

links.set(`css stats`, link);

var link = {

    href: `https://caniuse.com/#search=variables`,

    titles: {

        'fr': `aller sur le site Can I use…  Support tables for HTML5, CSS3, etc`,

        'en': `go to Can I use…  Support tables for HTML5, CSS3, etc`

    },

    lang: `en`

}

links.set(`can i use # css variables (custom properties)`, link);

var link = {

    href: `https://caniuse.com/#feat=css-unset-value`,

    titles: {

        'fr': `aller sur la page Can I use CSS unset value`,

        'en': `go to page Can I use CSS unset value`

    },

    lang: `en`

}

links.set(`can i use css unset value`, link);

var link = {

    href: `https://caniuse.com/#search=calc`,

    titles: {

        'fr': `aller sur la page Can I use calc() as CSS unit value`,

        'en': `go to page Can I use calc() as CSS unit value`

    },

    lang: `en`

}

links.set(`can i use calc() as css unit value`, link);

var link = {

    href: `https://www.w3.org/TR/css-grid-1/`,

    titles: {

        'fr': `lire une présentation de Css Grid Layout`,

        'en': `read a presentation of Css Grid Layout`

    },

    lang: `en`

}

links.set(`css grid layout`, link);

var link = {

    href: `http://csslint.net/`,

    titles: {

        'fr': `aller sur le site Css Lint`,

        'en': `go to Css Lint`

    },

    lang: `en`

}

links.set(`css lint`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties`,

    titles: {

        'fr': `lire l’article Using CSS custom properties (variables)`,

        'en': `read the article Using CSS custom properties (variables)`

    },

    lang: `en`

}

links.set(`css variables`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes`,

    title: `read the article Using data attributes`,

    lang: `en`

}

links.set(`data attributes`, link);

var link = {

    href: `http://es6-features.org/`,

    titles: {

        'fr': `aller sur le site ECMAScript 6`,

        'en': `go to ECMAScript 6`

    },

    lang: `en`

}

links.set(`ecma 6`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute`,

    titles: {

        'fr': `lire l’article Element.removeAttribute()`,

        'en': `read the article Element.removeAttribute()`

    },

    lang: `en`

}

links.set(`element.removeattribute()`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute`,

    titles: {

        'fr': `lire l’article Element.setAttribute()`,

        'en': `read the article Element.setAttribute()`

    },

    lang: `en`

}

links.set(`element.setattribute()`, link);

var link = {

    href: `https://emmet.io/`,

    titles: {

        'fr': `aller sur le site Emmet`,

        'en': `go to Emmet`

    },

    lang: `en`

}

links.set(`emmet`, link);

var link = {

    href: `https://riptutorial.com/javascript/example/19374/escape-sequence-types`,

    titles: {

        'fr': `lire l’article Escape sequence types`,

        'en': `read the article Escape sequence types`

    },

    lang: `en`

}

links.set(`escape sequence types`, link);

var link = {

    href: `https://www.facebook.com/`,

    titles: {

        'fr': `aller sur Facebook`,

        'en': `go to Facebook`

    },

    lang: `en`

}

links.set(`facebook`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/dataset`,

    titles: {

        'fr': `lire l’article HTMLElement.dataset`,

        'en': `read the article HTMLElement.dataset`

    },

    lang: `en`

}

links.set(`htmlelement.dataset`, link);

var link = {

    href: `https://gomakethings.com/how-performant-are-data-attributes-as-selectors/`,

    titles: {

        'fr': `lire l’article How performant are data attributes as selectors`,

        'en': `read the article How performant are data attributes as selectors`

    },

    lang: `en`

}

links.set(`how performant are data attributes as selectors`, link);

var link = {

    href: `http://lesscss.org/`,

    titles: {

        'fr': `aller sur le site Less.js`,

        'en': `go to Less.js`

    },

    lang: `en`

}

links.set(`less`, link);

links.set(`how performant are data attributes as selectors`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries`,

    titles: {

        'fr': `lire l’article Using media queries`,

        'en': `read the article Using media queries`

    },

    lang: `en`

}

links.set(`media queries`, link);

var link = {

    href: `https://nodejs.org/en/`,

    titles: {

        'fr': `aller sur le site Node.js`,

        'en': `go to site Node.js`

    },

    lang: `en`

}

links.set(`node js`, link);

var link = {

    href: `https://necolas.github.io/normalize.css/`,

    titles: {

        'fr': `aller sur le site Normalize.css`,

        'en': `go to Normalize.css`

    },

    lang: `en`

}

links.set(`normalize.css`, link);

var link = {

    href: `http://oocss.org/`,

    titles: {

        'fr': `aller sur le site Object-Oriented CSS`,

        'en': `go to Object-Oriented CSS`

    },

    lang: `en`

}

links.set(`object-oriented css`, link);

var link = {

    href: `https://sass-lang.com/`,

    titles: {

        'fr': `aller sur le site Sass: Syntactically Awesome Style Sheets`,

        'en': `go to Sass: Syntactically Awesome Style Sheets`

    },

    lang: `en`

}

links.set(`sass`, link);

var link = {

    href: `https://www.w3.org/TR/xpath-31/`,

    titles: {

        'fr': `aller sur la page XML Path Language`,

        'en': `go to page XML Path Language`

    },

    lang: `en`

}

links.set(`xml path language`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/API/XPathResult/iterateNext`,

    titles: {

        'fr': `lire la documentation à propos de XPathResult.iterateNext()`,

        'en': `read the documentation about XPathResult.iterateNext()`

    },

    lang: `en`

}

links.set(`iteratenext()`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties/Basic_concepts`,

    title: `read the documentation about logical properties and values`,

    lang: `en`

}

links.set(`logical properties and values`, link);

var link = {

    href: `https://github.com/lymnee/lymnee/blob/master/lymnee.benchmark.html`,

    titles: {

        'fr': `consulter le fichier lymnee.benchmark.html`,

        'en': `view the file lymnee.benchmark.html`

    },

    lang: `en`

}

links.set(`lymnee.benchmark.html`, link);

var link = {

    href: `https://github.com/lymnee/lymnee/blob/master/lymnee.js`,

    titles: {

        'fr': `consulter le fichier lymnee.js`,

        'en': `view the file lymnee.js`

    },

    lang: `en`

}

links.set(`lymnee.js`, link);

var link = {

    href: `https://github.com/lymnee/lymnee/blob/master/lymnee.live.min.js`,
    
    titles: {
    
        'fr': `consulter et télécharger le fichier lymnee.live.min.js`,
    
        'en': `view and download the file lymnee.live.min.js`
    
    },
    
    lang: `en`
    
    }
    
links.set(`lymnee.live.min.js`, link);

var link = {

href: `https://github.com/lymnee/lymnee/blob/master/lymnee.reload.js`,

titles: {

    'fr': `consulter et télécharger le fichier lymnee.reload.js`,

    'en': `view and download the file lymnee.reload.js`

},

lang: `en`

}

links.set(`lymnee.reload.js`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties/Basic_concepts`,

    title: `lire la documentation à propos des propriétés et valeurs logiques`,

    lang: `en`

}

links.set(`propriétés et valeurs logiques`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes`,

    titles: {

        'fr': `lire la documentation à propos des pseudo-classes`,

        'en': `read the documentation about pseudo-classes`

    },

    lang: `en`

}

links.set(`pseudo-classes`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements`,

    title: `lire la documentation à propos des pseudo-éléments`,

    lang: `en`

}

links.set(`pseudo-éléments`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements`,

    title: `read the documentation about pseudo-elements`,

    lang: `en`

}

links.set(`pseudo-elements`, link);

var link = {

    href: `https://www.w3.org/Style/CSS/specs.en.html`,

    title: `lire les spécifications Css`,

    lang: `en`

}

links.set(`spécifications css`, link);

var link = {

    href: `https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties`,

    title: `lire l’article Using CSS custom properties (variables)`,

    lang: `en`

}

links.set(`variables css`, link);

var link = {

    href: `https://www.npmjs.com/package/xpath`,

    titles: {

        'fr': `aller sur la page du paquet xpath`,

        'en': `go to page xpath package`

    },

    lang: `en`

}

links.set(`xpath`, link);

/*
    *
        Thesaurus of abbreviations.

    *
*/

const abbreviations = new Map();

var abbreviation = {

    title: `Content Delivery Network`,
    
    text: `cdn`

}

abbreviations.set(`cdn`, abbreviation);

var abbreviation = {

    title: `Cascading Styles Sheets`,
    
    text: `css`

}

abbreviations.set(`css`, abbreviation);

var abbreviation = {

    title: `Document Object Model`,
    
    text: `dom`

}

abbreviations.set(`dom`, abbreviation);

var abbreviation = {

    title: `Don’t Repeat Yourself`,
    
    text: `dry`

}

abbreviations.set(`dry`, abbreviation);

var abbreviation = {

    title: `Hypertext Markup Language`,
    
    text: `html`

}

abbreviations.set(`html`, abbreviation);

var abbreviation = {

    title: `Portable Document Format`,
    
    text: `pdf`

}

abbreviations.set(`pdf`, abbreviation);

var abbreviation = {

    title: `Hypertext Preprocessor`,
    
    text: `php`

}

abbreviations.set(`php`, abbreviation);

var abbreviation = {

    title: `Uniform Resource Locator`,

    /*titles: {

        'fr': `Localisateur Uniforme de Ressource `,

        'en': `Uniform Resource Locator`

    },*/
    
    text: `url`

}

abbreviations.set(`url`, abbreviation);

function getDimensions() {

    try {
    
        let widthScreen = window.screen.width * window.devicePixelRatio;

        let heightScreen = window.screen.height * window.devicePixelRatio;

        let scale = ``;

        if (heightScreen > widthScreen) {

            scale = heightScreen / widthScreen;

        } else {

            scale = widthScreen / heightScreen;

        }

        document.querySelector(`:root`).style.setProperty(`--scaleScreen`, scale);

        document.querySelector(`:root`).style.setProperty(`--xxxx`, Math.pow(scale, 3));

        document.querySelector(`:root`).style.setProperty(`--xxx`, Math.pow(scale, 2.5));

        document.querySelector(`:root`).style.setProperty(`--xx`, Math.pow(scale, 2));

        document.querySelector(`:root`).style.setProperty(`--x`, Math.pow(scale, 1.5));

        document.querySelector(`:root`).style.setProperty(`--xs`, Math.pow(scale, 1));

        document.querySelector(`:root`).style.setProperty(`--s`, Math.pow(scale, 0.5));

        document.querySelector(`:root`).style.setProperty(`--ss`, Math.pow(scale, 0));

        document.querySelector(`:root`).style.setProperty(`--sss`, Math.pow(scale, -0.5));

        document.querySelector(`:root`).style.setProperty(`--ssss`, Math.pow(scale, -1));

        document.querySelector(`:root`).style.setProperty(`--sssss`, Math.pow(scale, -1.5));

        document.querySelector(`:root`).style.setProperty(`--ssssss`, Math.pow(scale, -2));

        document.querySelector(`:root`).style.setProperty(`--sssssss`, Math.pow(scale, -2.5));

        document.querySelector(`:root`).style.setProperty(`--ssssssss`, Math.pow(scale, -3));

        document.querySelector(`:root`).style.setProperty(`--sssssssss`, Math.pow(scale, -3.5));

        /*document.querySelector(`:root`).style.setProperty(`--line-height`, Math.pow(scale, 0.5));*/

        document.querySelector(`:root`).style.setProperty(`--line-height`, Math.pow(scale, 1));
    
    } catch (error) {
    
        console.log(error.name);
    
        console.log(error.message); 
    
    }


}

function manageAbbreviations(selector) {

    try {

        titlesAbbreviations = new Set();

        document.querySelectorAll(selector + ` ` + `[data-ym-display^="block:lang(`+ document.documentElement.lang +`)"] [data-js-abbreviation]`).forEach(element => {

            if (abbreviations.has(element.textContent.toLowerCase())) {

                let abbr = ``;

                if (!titlesAbbreviations.has(element.textContent.toLowerCase())) {

                    titlesAbbreviations.add(element.textContent.toLowerCase());

                    if (abbreviations.get(element.textContent.toLowerCase()).title) {

                        abbr += `<abbr title="`;

                        abbr += abbreviations.get(element.textContent.toLowerCase()).title;

                        abbr += `">`;

                        abbr += abbreviations.get(element.textContent.toLowerCase()).title;

                        abbr += `</abbr>`;

                    } else {

                        /*
                            *
                                The title of an abbreviation may be different in English or in French. This case is rare! However, if the text of an abbreviation is different, two entries exist in the dictionary. 

                            *
                        */

                        if (abbreviations.get(element.textContent.toLowerCase()).titles[document.documentElement.lang]) {

                            abbr += `<abbr title="`;

                            abbr += abbreviations.get(element.textContent.toLowerCase()).titles[document.documentElement.lang];

                            abbr += `">`;

                            abbr += abbreviations.get(element.textContent.toLowerCase()).titles[document.documentElement.lang];

                            abbr += `</abbr>`;                       

                        }
                    }

                    abbr += ` `;

                    abbr += `(`;

                    abbr += `<span data-ym-font-variant="small-caps">`;

                    if (document.documentElement.lang === `fr`) {

                        abbr += abbreviations.get(element.textContent.toLowerCase()).text.charAt(0).toUpperCase() + abbreviations.get(element.textContent.toLowerCase()).text.slice(1);

                    } else {

                        abbr += abbreviations.get(element.textContent.toLowerCase()).text.toUpperCase();

                    }

                    abbr += `</span>`;

                    abbr += `)`;

                } else {

                    abbr += `<span data-ym-font-variant="small-caps">`;

                    if (document.documentElement.lang === `fr`) {

                        abbr += abbreviations.get(element.textContent.toLowerCase()).text.charAt(0).toUpperCase() + abbreviations.get(element.textContent.toLowerCase()).text.slice(1);

                    } else {

                        abbr += abbreviations.get(element.textContent.toLowerCase()).text.toUpperCase();
                    
                    }

                    abbr += `</span>`;

                }

                element.innerHTML = element.textContent.replace(element.textContent, abbr);

            }

        });

    } catch (error) {

        console.log(error.name);

        console.log(error.message); 

    }

}

function manageLinksV0() {

    try {

        document.querySelectorAll(`[data-js-link]`).forEach(function(element) {

            if (links.has(element.textContent.toLowerCase())) {

                /*
                    *
                        var str = "Crème Brulée et œuf";
                        str.normalize('NFD').replace(/\p{Diacritic}/gu, '');
                    *
                */

                let hyperlink = `<a data-ym-color="var(--accent-color)::after || currentColor" data-ym-content="' ↗'::after" data-ym-cursor="pointer" data-ym-font-weight="var(--font-weight-bold)::after" href="`;

                if (links.get(element.textContent.toLowerCase()).href) {

                    hyperlink += links.get(element.textContent.toLowerCase()).href;

                }

                hyperlink += `"`;

                hyperlink += ` `;

                hyperlink += `title="`;

                if (links.get(element.textContent.toLowerCase()).title) {

                    hyperlink += links.get(element.textContent.toLowerCase()).title;

                } else {

                    if (links.get(element.textContent.toLowerCase()).titles[document.documentElement.lang]) {

                        hyperlink += links.get(element.textContent.toLowerCase()).titles[document.documentElement.lang];

                    }

                }

                hyperlink += ` `;

                if (document.documentElement.lang === 'fr') { 
                    
                    hyperlink += `(S’ouvre dans une nouvelle fenêtre)`;  

                } else {

                    hyperlink += `(Opens in a new window)`;
                            
                }

                hyperlink += `"`;

                hyperlink += ` `;
                
                hyperlink += `target="_blank"`;

                if (links.get(element.textContent.toLowerCase()).lang) {

                    if (document.documentElement.lang !== links.get(element.textContent.toLowerCase()).lang) {

                        hyperlink += `lang=`;

                        hyperlink += `"`;

                        hyperlink += links.get(element.textContent.toLowerCase()).lang;

                        hyperlink += `"`;

                    }

                }

                hyperlink += `>`;
                
                hyperlink += element.textContent;
                
                hyperlink += `</a>`;

                element.innerHTML = element.textContent.replace(element.textContent, hyperlink);

            }

        });

    } catch (error) {

        console.log(error.name);

        console.log(error.message); 

    }

}

function manageLinks() {

    try {

        document.querySelectorAll(`[data-js-link]`).forEach(function(element) {

            if (links.has(element.textContent.toLowerCase())) {

                /*
                    *
                        var str = "Crème Brulée et œuf";
                        str.normalize('NFD').replace(/\p{Diacritic}/gu, '');
                    *
                */

                let hyperlink = `<a data-ym-color="var(--accent-color)::after || currentColor" data-ym-content="' ↗'::after@media screen" data-ym-cursor="pointer" data-ym-font-weight="var(--font-weight-bold)::after" href="`;

                /*let hyperlink = `<a data-ym-color="var(--accent-color)::after || currentColor" data-ym-content="' ['attr(href)']'::after" data-ym-cursor="pointer" data-ym-font-weight="var(--font-weight-bold)::after" href="`;*/

                if (links.get(element.textContent.toLowerCase()).href) {

                    hyperlink += links.get(element.textContent.toLowerCase()).href;

                }

                hyperlink += `"`;

                hyperlink += ` `;

                hyperlink += `title="`;

                if (links.get(element.textContent.toLowerCase()).title) {

                    hyperlink += links.get(element.textContent.toLowerCase()).title;

                } else {

                    if (links.get(element.textContent.toLowerCase()).titles[document.documentElement.lang]) {

                        hyperlink += links.get(element.textContent.toLowerCase()).titles[document.documentElement.lang];

                    }

                }

                hyperlink += ` `;

                if (document.documentElement.lang === 'fr') { 
                    
                    hyperlink += `(S’ouvre dans une nouvelle fenêtre)`;  

                } else {

                    hyperlink += `(Opens in a new window)`;
                            
                }

                hyperlink += `"`;

                hyperlink += ` `;
                
                hyperlink += `target="_blank"`;

                if (links.get(element.textContent.toLowerCase()).lang) {

                    if (document.documentElement.lang !== links.get(element.textContent.toLowerCase()).lang) {

                        hyperlink += `lang=`;

                        hyperlink += `"`;

                        hyperlink += links.get(element.textContent.toLowerCase()).lang;

                        hyperlink += `"`;

                    }

                }

                hyperlink += `>`;
                
                hyperlink += element.textContent;
                
                hyperlink += `</a>`;

                element.innerHTML = element.textContent.replace(element.textContent, hyperlink);

            }

        });

    } catch (error) {

        console.log(error.name);

        console.log(error.message); 

    }

}

function manageToc() {

    try {

        let main = document.querySelector(`[data-js-original]`);

        let entries = main.querySelectorAll(`h2[data-ym-display^="block:lang(`+ document.documentElement.lang +`)"], h2[data-ym-display="block"], h3[data-ym-display^="block:lang(`+ document.documentElement.lang +`)"], h3[data-ym-display="block"], h4[data-ym-display^="block:lang(`+ document.documentElement.lang +`)"], h4[data-ym-display="block"], h5[data-ym-display^="block:lang(`+ document.documentElement.lang +`)"], h5[data-ym-display="block"], h6[data-ym-display^="block:lang(`+ document.documentElement.lang +`)"], h6[data-ym-display="block"]`);
    
        let toc = `<p data-ym-color="var(--primary-color)" data-ym-display="block" data-ym-font-size="calc(var(--x) * 1rem)">`;
    
        if (document.documentElement.lang === `fr`) {
    
            toc += `Sommaire`;
    
        } else {
    
            toc += `Contents`;
    
        } 
        
        toc += `</p>`;

        toc += `<ul`;

        toc += ` `;

        if (document.documentElement.lang === 'fr') {

            toc += `data-ym-display="block:lang(fr) || none:lang(en)"`;
    
        } else {
    
            toc += `data-ym-display="block:lang(en) || none:lang(fr)"`;
    
        }

        toc += ` `;

        toc += `data-ym-margin-block-start="var(--margin-block-start-regular)">`;

        var i = 0;

        entries.forEach((entry) => {

            i++;

            entry.setAttribute('data-js-in', `in-` + i);

            toc += `<li data-ym-display="block"`;

            toc += ` `;

            switch (entry.tagName.toLowerCase()) {

                case `h3`:

                    toc += `data-ym-margin-inline-start="1ch || 2ch@media screen and (min-width: 1024px)"`;

                break;

                case `h4`:

                    toc += `data-ym-margin-inline-start="2ch || 3ch@media screen and (min-width: 1024px)"`;

                break;

                case `h5`:

                    toc += `data-ym-margin-inline-start="3ch || 4ch@media screen and (min-width: 1024px)"`;

                break;

                case `h6`:

                    toc += `data-ym-margin-inline-start="4ch || 5ch@media screen and (min-width: 1024px)"`;

                break;

            }

            toc += `<span data-ym-color="var(--accent-color)::after" data-ym-content="'&#x2009;→ '::after" data-ym-cursor="pointer" data-ym-font-weight="var(--font-weight-bold)::after"`;

            toc += `data-js-to=to-` + i;
    
            toc += `>`;
    
            toc += entry.innerHTML;
    
            toc += '</span>'
    
            toc += `</li>`;

        });

        toc += `</ul>`;

        document.querySelector(`[data-js-toc]`).innerHTML = toc;

        document.querySelectorAll(`[data-js-to]`).forEach((element) => {

            element.addEventListener(`click`, () => {
        
                let scrollIn = element.getAttribute(`data-js-to`).replace(`to`, `in`);
        
                document.querySelector(`[data-js-in="` + scrollIn + `"]`).scrollIntoView();
        
                /*
                    *
                        The element exist if the user has already clicked on an hyperlink.
                    *
                */
        
                if (document.querySelector(`[data-js-to-toc]`)) {
        
                    document.querySelector(`[data-js-to-toc]`).remove();
        
                }
        
                if (document.documentElement.lang === `fr`) {

                    document.querySelector(`[data-js-in="` + scrollIn + `"]`).innerHTML += `<span data-ym-color="var(--accent-color)" data-ym-cursor="pointer" data-ym-font-weight="var(--font-weight-bold)::after" data-js-to-toc title="retour au sommaire">&#x2009;↑</span>`;
        
                } else {
        
                    document.querySelector(`[data-js-in="` + scrollIn + `"]`).innerHTML += `<span data-ym-color="var(--accent-color)" data-ym-cursor="pointer" data-ym-font-weight="var(--font-weight-bold)::after" data-js-to-toc title="back to contents">&#x2009;↑</span>`;
        
                }
        
                document.querySelector(`[data-js-to-toc]`).addEventListener('click', () => {
        
                    document.querySelector(`[data-js-toc]`).scrollIntoView();
        
                    document.querySelector(`[data-js-to-toc]`).remove();
        
                });
        
            });
        
        });

    } catch (error) {

        console.log(error.name);

        console.log(error.message); 

    }       

}

function minifyMyCss(css) {

    try {

        return css

            .replace(/([^0-9a-zA-Z\.#])\s+/g, `$1`)

            .replace(/\s([^0-9a-zA-Z\.#]+)/g, `$1`)

            .replace(/;}/g, `}`)

            .replace(/\/\*.*?\*\//g, ``);

    } catch (error) {

        console.log(error.name);

        console.log(error.message); 

    }

}

function setLanguage() {

    try {

        try {

            if (localStorage.getItem(`data-lang`)) {
        
                document.querySelector(`html`).setAttribute(`lang`, localStorage.getItem(`data-lang`));
        
            }
            
        } catch {
            
            try {
            
                if (window.navigator.language.substring(0, 2).toLowerCase() !== `fr`) {

                    document.querySelector(`html`).setAttribute(`lang`, `en`);
                    
                }
    
            } catch {
    
                document.querySelector(`html`).setAttribute(`lang`, `fr`);
    
            }
    
        }

        if (document.querySelector(`[data-js-lang]`)) {

            document.querySelector(`[data-js-lang]`).addEventListener(`click`, () => {

                if (document.documentElement.lang === `fr`) {
            
                    localStorage.setItem(`data-lang`, `en`);
            
                } else {
            
                    localStorage.setItem(`data-lang`, `fr`);
            
                }
            
                location.reload();
            
            });

        }

    } catch (error) {

        console.log(error.name);

        console.log(error.message); 

    }

}

function shapeContent() {

    try {

        let main = document.querySelector(`[data-js-original]`);

        if (main.querySelectorAll(`code`).length) {
    
            main.querySelectorAll(`code`).forEach((entry) => {

                entry.setAttribute(`data-ym-color`, `var(--accent-color)::before || var(--accent-color)::after`);

                entry.setAttribute(`data-ym-content`, `'<code>'::before || '</code>'::after`);

                entry.setAttribute(`data-ym-hyphens`, `none`);

            });

        }

        if (main.querySelectorAll(`dd`).length) {
    
            main.querySelectorAll(`dd`).forEach((entry) => {

                /*entry.setAttribute(`data-ym-color`, `var(--accent-color)::before`);

                entry.setAttribute(`data-ym-content`, `'•'::before`);*/

                entry.setAttribute(`data-ym-display`, `block`);

            });

        }
    
        if (main.querySelectorAll(`dt, h2, h3, h4, h5, h6, p, ol, ul`).length) {
    
            main.querySelectorAll(`dt, dt, h2, h3, h4, h5, h6, p, ol, ul`).forEach((entry) => {
                
                if (entry.hasAttribute(`data-lang`)) {

                    switch (entry.getAttribute(`data-lang`))  {

                        case `fr`:

                            entry.setAttribute(`data-ym-display`, `block:lang(fr) || none:lang(en)`);

                        break;

                        default:

                            entry.setAttribute(`data-ym-display`, `block:lang(en) || none:lang(fr)`);
                    }
    
                }

                if (!entry.hasAttribute(`data-lang`)) {

                    entry.setAttribute(`data-ym-display`, `block`);


                }
    
                entry.setAttribute(`data-ym-margin-block-start`, `var(--margin-block-start-regular)`);
            
            });
    
        }

        if (main.querySelectorAll(`dt`).length) {
    
            main.querySelectorAll(`dt`).forEach((entry) => {

                entry.setAttribute(`data-ym-color`, `var(--accent-color)::first-letter`);

                entry.setAttribute(`data-ym-font-variant`, `small-caps::first-letter`);

                entry.setAttribute(`data-ym-font-weight`, `var(--font-weight-bold)::first-letter`);

            });

        }

        if (main.querySelectorAll(`h2, h3, h4, h5, h6`).length) {
    
            main.querySelectorAll(`h2, h3, h4, h5, h6`).forEach((entry) => {

                if (!entry.hasAttribute(`data-ym-color`)) {

                    entry.setAttribute(`data-ym-color`, `var(--primary-color)`);

                }

            });

        }

        if (main.querySelectorAll(`li`).length) {
    
            main.querySelectorAll(`li`).forEach((entry) => {

                if (!entry.hasAttribute(`data-ym-color`)) {

                    entry.setAttribute(`data-ym-color`, `var(--primary-color)::marker`);

                }

                if (!entry.hasAttribute(`data-ym-display`)) {

                    entry.setAttribute(`data-ym-display`, `list-item`);

                }

            });

        }

        if (main.querySelectorAll(`ol, ul`).length) {
    
            main.querySelectorAll(`ol, ul`).forEach((entry) => {

                if (!entry.hasAttribute(`data-ym-list-style-position`)) {

                    entry.setAttribute(`data-ym-list-style-position`, `inside`);

                }

            });

        }

        if (main.querySelectorAll(`ol`).length) {
    
            main.querySelectorAll(`ol`).forEach((entry) => {

                if (!entry.hasAttribute(`data-ym-list-style-type`)) {

                    entry.setAttribute(`data-ym-list-style-type`, `decimal`);

                }

            });

        }

        if (main.querySelectorAll(`pre`).length) {
    
            main.querySelectorAll(`pre`).forEach((entry) => {

                entry.setAttribute(`data-ym-border-inline-start`, `calc(var(--sssssssss) * 1rem) solid var(--accent-color)`);

                entry.setAttribute(`data-ym-display`, `block`);

                entry.setAttribute(`data-ym-hyphens`, `none`);

                entry.setAttribute(`data-ym-margin-block-start`, `var(--margin-block-start-regular)`);

                entry.setAttribute(`data-ym-padding-inline-start`, `calc(var(--s) * 1rem)`);

                entry.setAttribute(`data-ym-white-space`, `pre-wrap`);

                entry.setAttribute(`data-ym-white-space`, `break-spaces`);
    
            });
    
        }

        if (main.querySelectorAll(`ul`).length) {
    
            main.querySelectorAll(`ul`).forEach((entry) => {

                if (!entry.hasAttribute(`data-ym-list-style-type`)) {

                    entry.setAttribute(`data-ym-list-style-type`, `disc`);

                }

            });

        }

        if (main.querySelectorAll(`[data-css-lymnee]`).length) {

            document.querySelectorAll(`[data-css-lymnee]`).forEach((entry) => {

                entry
                .setAttribute(`data-ym-color`, `var(--primary-color)`);
                entry
                .setAttribute(`data-ym-font-variant`, `small-caps::first-letter`);
                entry
                .setAttribute(`data-ym-font-weight`, `var(--font-weight-bold)`);
        
            });

        }

        if (main.querySelectorAll(`[data-css-quote]`).length) {

            document.querySelectorAll(`[data-css-quote]`).forEach((entry) => {

                entry.setAttribute(`data-ym-content`, `open-quote::before || close-quote::after`);
        
            });

        }
    
    } catch (error) {
    
        console.log(error.name);
    
        console.log(error.message); 
    
    }

}

function showTimestamp() {

    try {

        let humanDate = new Date(document.lastModified);

        let options = {day: `numeric`, month: `long`, year: `numeric`};

        let frenchDate = new Intl.DateTimeFormat(`fr-FR`, options).format(humanDate);

        let englishDate = new Intl.DateTimeFormat(`en-US`, options).format(humanDate);

        if (document.querySelector(`[data-js-update]`)) {

            if (document.documentElement.lang === `fr`) {

                document.querySelector(`[data-js-update]`).innerHTML = frenchDate;

            } else {

                document.querySelector(`[data-js-update]`).innerHTML = englishDate;

            }

        }

    } catch (error) {
    
        console.log(error.name);
    
        console.log(error.message); 
    
    }

}

function summarizeContent() {

    try {

        let summaryContent = '';

        document.querySelectorAll('[data-ym-display^="block:lang(' + document.documentElement.lang + ')"][data-js-summarize], [data-ym-display="block"][data-js-summarize], pre[data-js-summarize]').forEach(element => {

            summaryContent += element.outerHTML;

        });

        if (document.querySelector(`[data-js-abstract]`)) {

            document.querySelector('[data-js-abstract]').innerHTML += summaryContent;

        }

    } catch (error) {
    
        console.log(error.name);
    
        console.log(error.message); 
    
    }

}

function toggleContent() {

    try {

        document.querySelector('[data-js-summary]').addEventListener('click', () => {

            if (document.querySelector('[data-js-summary]').getAttribute('data-js-summary') === 'close') {
              
                document.querySelector('[data-js-summary]').setAttribute('data-js-summary', 'open');

                document.querySelector('[data-js-abstract]').setAttribute('data-ym-display', 'block');

                document.querySelector('[data-js-original]').setAttribute('data-ym-display', 'none');

            } else {
                
                document.querySelector('[data-js-summary]').setAttribute('data-js-summary', 'close');

                document.querySelector('[data-js-abstract]').setAttribute('data-ym-display', 'none');

                document.querySelector('[data-js-original]').setAttribute('data-ym-display', 'block');
                
            }

            if (document.querySelector('[data-js-to-toc]')) {

                document.querySelector(`[data-js-to-toc]`).remove();

            }

        });

    } catch (error) {
    
        console.log(error.name);
    
        console.log(error.message); 
    
    }

}

function translateTags() {

    try {

        const tags = ['alt', 'content', 'title'];

        if (document.documentElement.lang !== 'fr') {

            document.querySelectorAll('[data-js-translation]').forEach((element) => {

                tags.forEach((tag) => {

                    if (element.hasAttribute(tag)) {

                        let text = element[tag];

                        element[tag] = element.getAttribute('data-js-translation');

                        element.setAttribute('data-js-translation', text);

                    }

                });

            });

        }

    } catch (error) {
    
        console.log(error.name);
    
        console.log(error.message); 
    
    }

}

try {

    const listPromises = [

        new Promise(resolve => resolve(shapeContent())),

        new Promise(resolve => resolve(setLanguage())),

        new Promise(resolve => resolve(translateTags())),

        new Promise(resolve => resolve(getDimensions())),

        new Promise(resolve => resolve(manageLinks())),

        new Promise(resolve => resolve(toggleContent())),

        new Promise(resolve => resolve(showTimestamp())),

        new Promise(resolve => resolve(summarizeContent())),

        new Promise(resolve => resolve(manageToc()))

    ];

    const allPromises = Promise.all(listPromises);

    const versions = new Set([`[data-js-original]`, `[data-js-abstract]`]);

    for (const selector of versions) {

        allPromises
        
        .then(new Promise(resolve => manageAbbreviations(selector)));
        
    }

} catch (error) {

    console.log(error.name);

    console.log(error.message); 

}

var cssAfter;

var cssBefore;

cssAfter = `

:lang(fr) {  
    quotes: '«\u202F' '\u202F»'
}

:lang(en) {  
    quotes: '“' '”'
}

`;

cssBefore = `

/*@import url('https://fonts.googleapis.com/css2?family=Material+Icons&family=B612:wght@400;700&display=swap');*/

:root {

    /* https://www.materialpalette.com/red/green */
    --accent-color: #4cAf50;
    --dark-primary-color: #d32f2f;
    --divider-color: #bdbdbd;
    --primary-color: #f44336;
    --text-color: #212121;

    /* https://fonts.google.com/specimen/B612?query=b612 */

    /*--font-family-sans-serif: 'B612', sans-serif;*/
    /*--font-family-sans-serif: sans-serif;*/
    --font-family-sans-serif: 'IBM Plex Sans', sans-serif;

    --font-weight-regular: 400;
    --font-weight-bold: 700;

    --margin-block-start-regular: calc(var(--ss) * 1rem);


    --icon-equal-box: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAHoUlEQVR42u3dy6vV5R7H8c8SQbuiQVamUmZZFjVKHNTABtVUyllGRPYHOM+oQUQDcSgZTqpJUpMG1cSMIgSbSBdMLMslUjmwi91hrzP44aGOp3O21+dZfl8v2ODww2L93vv5rbX2cjSZTCYBSprTegDQjgBAYQIAhQkAFCYAUJgAQGECAIUJABQmAFCYAEBhAgCFCQAUJgBQmABAYQIAhQkAFCYAUJgAQGECAIUJABQmAFCYAEBhAgCFCQAUJgBQmABAYQIAhQkAFCYAUJgAQGECAIXNbT3gjM3MJPv2Jbt3J3v3JgcOJIcPJ7/8kvz8c+t1XIwuu2z4WbYsWbkyWb06Wbs2ueOOZDRqve6MjCaTyaT1iNNy+HDy4ovJyy8P/4bWbrop2bAh2bgxWby49ZrTMj0BOHIkeeqp5NVXkz//bL0GTjVvXvL448nTTyfXXNN6zaz0H4CZmWTr1uFBPXGi9Rr4/xYsSJ5/Pnnyye5vDfoOwLFjw9HqnXdaL4HTt25dsmPHEIRO9RuAr75KHnhgeHEPptWqVcMvsCVLWi/5r/oMwKFDyT33JEePtl4CZ+/GG5MPPujyBcL+Pgdw7Fhy//0ufi4ehw4lDz6Y/PBD6yWn6CsAMzPDPf/Bg62XwLn18cfDc7uzA3dfAdi61Qt+XLzefDPZvr31ir/p5zWAI0eS227zVh8Xt4ULk/37k0WLWi9J0tMJYPNmFz8Xv+PHk2eeab3i3/o4AYzHyYoVyR9/tF4C59+8ecmXX3bxrkAfJ4Bt21z81PH778lLL7VekaSHE8DMTLJ8efL1160fC7hwVqwYPuTW+KPC7U8A+/a5+Knn4MHks89ar+ggAO++23oBtLFrV+sFHQTgo49aL4A2Onjutw+AP/ahqv37Wy/oIABHjrReAG2Mx60XdBCAn35qvQDa+PHH1gs6eBtwzpzu/kACLojRaHgbvKH2JwAXP1V18NxvHwCgGQGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMLmth4wNdasSTZtar2C2diyJdmzp/WKqSAAs7V0abJ+fesVzMbOnQIwS24BoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAK852AszUeD981R//G49YLpsZoMplM2i4YtX4MoJ3Gl59bAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAobG7rAVNjzZpk06bWK5iNLVuSPXtar5gKAjBbS5cm69e3XsFs7NwpALPkFgAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDDfCThb4/HwXXP0bzxuvWBqjCaTyaTtglHrxwDaaXz5uQWAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAprHwD/PThVdfDcbx+ASy5pvQDauPTS1gs6CMAVV7ReAG1ceWXrBR0EYOnS1gugjWXLWi/oIAArV7ZeAG3cckvrBR0E4O67Wy+ANlavbr2ggwCsXdt6AbRx332tF2Q0mUwmTRdMJsnNNydffNH6sYALZ8WK5MCB5m8Ftj8BjEbJhg2tV8CF9eijzS/+pIcTQJJ8802yfHny66+tl8D5N3/+cOJdvLj1kg5OAEly7bXJY4+1XgEXxhNPdHHxJ72cAJLku++SW29Njh9vvQTOn4ULk88/T66+uvWSJL2cAJJk0aLkuedar4Dz64UXurn4k55OACc99FDyxhutV8C59/DDyc6drVf8TX8B+P775N57k08+ab0Ezp0770zef7+Lz///VT+3ACctWJC8/XZyww2tl8C5sXx58tZb3V38SY8BSJLrr08+/DC5667WS+Ds3H578t573bzq/5/6DECSXHddsnt3sm5d6yVwZtavH36RLVnSesk/6jcAyXA78PrrybZtw79hGlx1VbJ9e/Laa10e+/+qvxcB/8m33ybPPpvs2JH89lvrNXCq+fOHD/ls3tzVW33/y/QE4KSjR4e6vvJKcvBg6zUw/F3/I48kGzcOn2qdItMXgJMmk+TTT5Ndu5K9e4dPV43HyYkTww+ca5dfPvwsWzZ8kc3q1cOf9K5a1XrZGZveAABnre8XAYHzSgCgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgMIEAAoTAChMAKAwAYDCBAAKEwAoTACgMAGAwgQAChMAKEwAoDABgML+BXt6XGTHBHkcAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA2LTIyVDE1OjUyOjM2KzAwOjAw9FENBgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNi0yMlQxNTo1MjozNiswMDowMIUMtboAAAAASUVORK5CYII=);
        
}

.material-symbols-outlined {
  font-variation-settings:
  'FILL' 0,
  'wght' 700,
  'GRAD' 0,
  'opsz' 48
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0
}

`;

var cssAfterLymnee = minifyMyCss(cssAfter);

var cssBeforeLymnee = minifyMyCss(cssBefore);

var printLymnee = true,

entriesLymnee = new Set([`data-ym-display="none"`]),

unsetLymnee = true;
